<!DOCTYPE html>
<html lang="en" data-theme="light">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta name="description" content="Lumina - A modern, minimal blog platform for developers and designers.">
    <meta name="author" content="Lumina Team">
    
    <!-- Open Graph / Facebook -->
    <meta property="og:type" content="website">
    <meta property="og:title" content="Lumina Blog">
    <meta property="og:description" content="Thoughts, stories, and ideas.">
    
    <!-- Twitter -->
    <meta property="twitter:card" content="summary_large_image">
    <link rel="stylesheet" href="syles.css">
    <title>Lumina | Modern Blog</title>
</head>
<body>

    <!-- Header -->
    <header class="site-header">
        <div class="container header-inner">
            <a href="#home" class="logo" aria-label="Lumina Home">Lumina.</a>
            
            <nav>
                <ul class="nav-links">
                    <li><a href="#home" class="nav-link active" data-link>Home</a></li>
                    <li><a href="#category/Technology" class="nav-link" data-link>Technology</a></li>
                    <li><a href="#category/Design" class="nav-link" data-link>Design</a></li>
                    <li><a href="#about" class="nav-link" data-link>About</a></li>
                </ul>
            </nav>

            <div class="header-actions">
                <div class="search-container">
                    <svg class="search-icon" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M21 21l-6-6m2-5a7 7 0 11-14 0 7 7 0 0114 0z"></path></svg>
                    <input type="text" id="searchInput" class="search-input" placeholder="Search posts..." aria-label="Search">
                </div>
                
                <button id="themeToggle" class="btn btn-outline" aria-label="Toggle Dark Mode">
                    <!-- Sun Icon -->
                    <svg class="sun-icon" style="width:20px;height:20px;display:none;" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M12 3v1m0 16v1m9-9h-1M4 12H3m15.364 6.364l-.707-.707M6.343 6.343l-.707-.707m12.728 0l-.707.707M6.343 17.657l-.707.707M16 12a4 4 0 11-8 0 4 4 0 018 0z"></path></svg>
                    <!-- Moon Icon -->
                    <svg class="moon-icon" style="width:20px;height:20px;" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M20.354 24.354A9 9 0 018.646 3.646 9.003 9.003 0 0012 21a9.003 9.003 0 008.354-5.646z"></path></svg>
                </button>

                <button class="menu-toggle" aria-label="Menu">â˜°</button>
            </div>
        </div>
    </header>

    <!-- Main Content Area -->
    <main id="app" class="container" style="min-height: 80vh; padding-top: 2rem;">
        <!-- Dynamic content will be injected here via JavaScript -->
    </main>

    <!-- Footer -->
    <footer class="site-footer">
        <div class="container">
            <div class="footer-links">
                <a href="#">Privacy Policy</a>
                <a href="#">Terms of Service</a>
                <a href="#">Sitemap</a>
            </div>
            <p>&copy; 2023 Lumina Blog. Built with clean HTML, CSS & JS.</p>
        </div>
    </footer>

    <script>
        /**
         * ==========================================
         * DATA STORE (Mock Database)
         * ==========================================
         */
        const AUTHORS = {
            1: { name: "Sarah Jenkins", role: "Senior UI Designer", avatar: "https://picsum.photos/seed/sarah/150/150" },
            2: { name: "David Chen", role: "Full Stack Engineer", avatar: "https://picsum.photos/seed/david/150/150" },
            3: { name: "Elena Rodriguez", role: "Frontend Architect", avatar: "https://picsum.photos/seed/elena/150/150" }
        };

        const POSTS = [
            {
                id: 1,
                title: "The Future of Web Design in 2024",
                excerpt: "Exploring the shift towards brutalism, micro-interactions, and accessibility-first design systems.",
                content: `
                    <p>Web design is an ever-evolving field. As we move into 2024, we see a distinct shift away from hyper-flat design towards interfaces that have more personality and depth.</p>
                    <h2>The Return of Texture</h2>
                    <p>Designers are beginning to experiment with noise, gradients, and glassmorphism again, but in a much more refined way than before. The key is subtlety.</p>
                    <blockquote>"Accessibility is not a feature, it's a fundamental aspect of the web that allows everyone to participate."</blockquote>
                    <p>We are also seeing a massive push towards semantic HTML and CSS grid layouts that don't just look good, but perform exceptionally well on all devices.</p>
                    <h2>Performance as a Design Principle</h2>
                    <p>Gone are the days when a heavy hero section was acceptable. Core Web Vitals are now ranking factors, making speed a design constraint.</p>
                `,
                authorId: 1,
                category: "Design",
                tags: ["UI/UX", "Trends", "CSS"],
                image: "https://picsum.photos/seed/design1/800/600",
                date: "Oct 24, 2023",
                featured: true
            },
            {
                id: 2,
                title: "Mastering Asynchronous JavaScript",
                excerpt: "A deep dive into Promises, Async/Await, and the Event Loop to write cleaner non-blocking code.",
                content: "<p>Understanding the JavaScript event loop is crucial for any senior developer. This article breaks down the call stack, callback queue, and microtask queue...</p><p>We will look at practical examples using Fetch API and handling errors gracefully in complex chains.</p>",
                authorId: 2,
                category: "Technology",
                tags: ["JavaScript", "Programming", "Tutorial"],
                image: "https://picsum.photos/seed/js/800/600",
                date: "Oct 22, 2023",
                featured: false
            },
            {
                id: 3,
                title: "Server-Side Rendering vs. Static Generation",
                excerpt: "Choosing the right rendering strategy for your Next.js application.",
                content: "<p>When building modern web apps, the choice between SSR and SSG can define your architecture. SSR provides fresh data but at a computational cost. SSG is lightning fast but requires rebuilding.</p>",
                authorId: 3,
                category: "Technology",
                tags: ["React", "Next.js", "SSR"],
                image: "https://picsum.photos/seed/next/800/600",
                date: "Oct 20, 2023",
                featured: false
            },
            {
                id: 4,
                title: "Building Accessible Components",
                excerpt: "How to use ARIA roles and semantic HTML to ensure your site is usable by everyone.",
                content: "<p>Accessibility starts with HTML. Using the right tag for the job solves 80% of issues. The remaining 20% involves ARIA labels and keyboard navigation management.</p>",
                authorId: 1,
                category: "Design",
                tags: ["A11y", "HTML", "WCAG"],
                image: "https://picsum.photos/seed/a11y/800/600",
                date: "Oct 18, 2023",
                featured: false
            },
            {
                id: 5,
                title: "CSS Grid: The Ultimate Layout System",
                excerpt: "Why CSS Grid has replaced Flexbox for page layout and how to use it effectively.",
                content: "<p>While Flexbox is one-dimensional, Grid is two-dimensional. This makes it perfect for page layouts where you need control over rows and columns simultaneously.</p>",
                authorId: 3,
                category: "Design",
                tags: ["CSS", "Layout", "Frontend"],
                image: "https://picsum.photos/seed/grid/800/600",
                date: "Oct 15, 2023",
                featured: false
            },
            {
                id: 6,
                title: "TypeScript Best Practices",
                excerpt: "Moving beyond basic types to use Generics and Utility Types effectively.",
                content: "<p>TypeScript offers a powerful type system. Moving from `any` to proper interfaces and types makes your codebase robust and maintainable.</p>",
                authorId: 2,
                category: "Technology",
                tags: ["TypeScript", "Code Quality"],
                image: "https://picsum.photos/seed/ts/800/600",
                date: "Oct 12, 2023",
                featured: false
            }
        ];

        /**
         * ==========================================
         * APP STATE & UTILS
         * ==========================================
         */
        const state = {
            currentRoute: 'home',
            searchQuery: '',
            theme: localStorage.getItem('theme') || 'light'
        };

        const Utils = {
            debounce(func, wait) {
                let timeout;
                return function(...args) {
                    clearTimeout(timeout);
                    timeout = setTimeout(() => func.apply(this, args), wait);
                };
            },
            getAuthor(id) {
                return AUTHORS[id] || { name: "Unknown", role: "Contributor", avatar: "" };
            }
        };

        /**
         * ==========================================
         * UI COMPONENTS (Render Functions)
         * ==========================================
         */
        
        // 1. Post Card Component
        const PostCard = (post) => {
            const author = Utils.getAuthor(post.authorId);
            return `
                <article class="post-card fade-in">
                    <a href="#post/${post.id}" class="post-image-wrapper" tabindex="-1">
                        <img src="${post.image}" alt="${post.title}" class="post-image" loading="lazy">
                    </a>
                    <div class="post-content">
                        <div class="post-meta">
                            <img src="${author.avatar}" alt="${author.name}" class="author-avatar-small">
                            <span>${author.name}</span>
                            <span>&bull;</span>
                            <span>${post.date}</span>
                        </div>
                        <a href="#post/${post.id}">
                            <h3 class="post-title">${post.title}</h3>
                        </a>
                        <p class="post-excerpt">${post.excerpt}</p>
                        <div style="margin-top: auto; padding-top: 1rem;">
                            <span class="tag">${post.category}</span>
                        </div>
                    </div>
                </article>
            `;
        };

        // 2. Featured Post Component
        const FeaturedPost = (post) => {
            const author = Utils.getAuthor(post.authorId);
            return `
                <section class="featured-post fade-in">
                    <img src="${post.image}" alt="${post.title}" class="featured-image" loading="lazy">
                    <div class="featured-content">
                        <div class="post-meta">
                            <span class="tag">Featured</span>
                            <span class="tag">${post.category}</span>
                        </div>
                        <a href="#post/${post.id}">
                            <h2 class="post-title" style="font-size: 2rem;">${post.title}</h2>
                        </a>
                        <div class="post-meta" style="margin-top: 1rem; margin-bottom: 1.5rem;">
                            <img src="${author.avatar}" alt="${author.name}" class="author-avatar-small">
                            <span>${author.name}</span>
                            <span>&bull;</span>
                            <span>${post.date}</span>
                        </div>
                        <p style="font-size: 1.1rem; margin-bottom: 1.5rem;">${post.excerpt}</p>
                        <a href="#post/${post.id}" class="btn btn-primary">Read Article</a>
                    </div>
                </section>
            `;
        };

        // 3. Pagination Component (Visual Only for demo)
        const Pagination = () => `
            <div class="pagination">
                <button class="btn btn-outline" disabled>Previous</button>
                <button class="page-btn active">1</button>
                <button class="page-btn">2</button>
                <button class="page-btn">3</button>
                <button class="btn btn-outline">Next</button>
            </div>
        `;

        // 4. Full Article Component
        const ArticleView = (post) => {
            const author = Utils.getAuthor(post.authorId);
            // Update Meta Tags dynamically
            document.title = `${post.title} | Lumina`;
            document.querySelector('meta[name="description"]').setAttribute("content", post.excerpt);

            return `
                <article class="article-view fade-in">
                    <header class="article-header">
                        <div class="post-meta" style="justify-content: center; margin-bottom: 1rem;">
                            <span class="tag">${post.category}</span>
                            <span>${post.date}</span>
                        </div>
                        <h1 class="article-title">${post.title}</h1>
                        <div class="article-meta-row">
                            <img src="${author.avatar}" alt="${author.name}" class="author-avatar-small" style="width: 48px; height: 48px;">
                            <div style="text-align: left;">
                                <div style="font-weight: 700; color: var(--text-main);">${author.name}</div>
                                <div style="font-size: 0.85rem;">${author.role}</div>
                            </div>
                        </div>
                    </header>
                    
                    <img src="${post.image}" alt="${post.title}" style="width: 100%; border-radius: var(--radius); margin-bottom: 3rem;">
                    
                    <div class="article-body">
                        ${post.content}
                    </div>

                    <div class="author-box">
                        <img src="${author.avatar}" alt="${author.name}" class="author-avatar-large">
                        <div>
                            <h4 style="margin-bottom: 0.5rem;">About ${author.name}</h4>
                            <p style="margin-bottom: 0;">${author.role} passionate about creating exceptional digital experiences. Lover of coffee, code, and clean design.</p>
                        </div>
                    </div>
                </article>
            `;
        };

        /**
         * ==========================================
         * ROUTER & VIEW CONTROLLER
         * ==========================================
         */
        const App = {
            root: document.getElementById('app'),

            init() {
                this.setupTheme();
                this.setupSearch();
                this.handleRoute(); // Handle initial load
                window.addEventListener('hashchange', () => this.handleRoute());
            },

            setupTheme() {
                const toggleBtn = document.getElementById('themeToggle');
                const sunIcon = document.querySelector('.sun-icon');
                const moonIcon = document.querySelector('.moon-icon');
                
                const applyTheme = (theme) => {
                    document.documentElement.setAttribute('data-theme', theme);
                    localStorage.setItem('theme', theme);
                    if(theme === 'dark') {
                        sunIcon.style.display = 'block';
                        moonIcon.style.display = 'none';
                    } else {
                        sunIcon.style.display = 'none';
                        moonIcon.style.display = 'block';
                    }
                };

                applyTheme(state.theme);

                toggleBtn.addEventListener('click', () => {
                    state.theme = state.theme === 'light' ? 'dark' : 'light';
                    applyTheme(state.theme);
                });
            },

            setupSearch() {
                const input = document.getElementById('searchInput');
                const handler = Utils.debounce((e) => {
                    state.searchQuery = e.target.value.toLowerCase();
                    if(window.location.hash !== '#home') {
                        window.location.hash = '#home';
                    } else {
                        this.renderHome();
                    }
                }, 300);

                input.addEventListener('input', handler);
            },

            handleRoute() {
                const hash = window.location.hash || '#home';
                const parts = hash.split('/');
                const route = parts[0];
                const param = parts[1]; // ID or Category

                window.scrollTo(0, 0);

                // Highlight active nav
                document.querySelectorAll('.nav-link').forEach(l => l.classList.remove('active'));
                const activeLink = document.querySelector(`a[href="${hash}"]`) || document.querySelector(`a[href="${route}"]`);
                if(activeLink) activeLink.classList.add('active');

                if (route === '#home') {
                    this.renderHome();
                } else if (route === '#post') {
                    this.renderPost(parseInt(param));
                } else if (route === '#category') {
                    this.renderCategory(param);
                } else if (route === '#about') {
                    this.renderAbout();
                } else {
                    this.renderHome();
                }
            },

            renderHome() {
                document.title = "Home | Lumina";
                document.querySelector('meta[name="description"]').setAttribute("content", "Latest articles and stories.");
                
                const filteredPosts = POSTS.filter(p => 
                    p.title.toLowerCase().includes(state.searchQuery) || 
                    p.excerpt.toLowerCase().includes(state.searchQuery) ||
                    p.category.toLowerCase().includes(state.searchQuery)
                );

                let html = '';

                if (filteredPosts.length === 0) {
                    this.root.innerHTML = `<div style="text-align:center; padding: 4rem;"><h3>No posts found.</h3><p>Try searching for something else.</p></div>`;
                    return;
                }

                // Featured Post (only show on first page or if search is empty)
                const featured = filteredPosts.find(p => p.featured);
                if (featured && !state.searchQuery) {
                    html += FeaturedPost(featured);
                }

                html += `<div class="grid-layout">`;
                // Render grid excluding featured if already shown
                const gridPosts = (featured && !state.searchQuery) 
                    ? filteredPosts.filter(p => p.id !== featured.id) 
                    : filteredPosts;

                html += gridPosts.map(post => PostCard(post)).join('');
                html += `</div>`;
                
                if (!state.searchQuery) {
                    html += Pagination();
                }

                this.root.innerHTML = html;
            },

            renderPost(id) {
                const post = POSTS.find(p => p.id === id);
                if (!post) {
                    this.root.innerHTML = `<h2>Post not found</h2><a href="#home" class="btn btn-primary">Go Home</a>`;
                    return;
                }
                this.root.innerHTML = ArticleView(post);
            },

            renderCategory(categoryName) {
                document.title = `${categoryName} | Lumina`;
                const posts = POSTS.filter(p => p.category === categoryName);
                
                let html = `
                    <div class="hero fade-in">
                        <h1>Category: ${categoryName}</h1>
                        <p>Exploring the best of ${categoryName.toLowerCase()}.</p>
                    </div>
                    <div class="grid-layout fade-in">
                        ${posts.map(post => PostCard(post)).join('')}
                    </div>
                `;
                this.root.innerHTML = html;
            },
            
            renderAbout() {
                document.title = "About | Lumina";
                this.root.innerHTML = `
                    <div class="container fade-in" style="max-width: 700px; padding-top: 2rem; text-align: center;">
                        <img src="https://picsum.photos/seed/logo/100/100" style="width: 100px; height: 100px; border-radius: 50%; margin: 0 auto 2rem;" alt="Lumina Logo">
                        <h1>About Lumina</h1>
                        <p style="font-size: 1.25rem; color: var(--text-main); margin-bottom: 2rem;">
                            We are a digital publication dedicated to high-quality engineering and design content.
                            Built on the principles of clean code, minimalism, and accessibility.
                        </p>
                        <div style="display: grid; grid-template-columns: 1fr 1fr; gap: 2rem; margin-top: 3rem; text-align: left;">
                            <div>
                                <h3>Our Mission</h3>
                                <p>To simplify complex technical topics for developers worldwide.</p>
                            </div>
                            <div>
                                <h3>Our Stack</h3>
                                <p>We love Semantic HTML, Modern CSS, and Vanilla JavaScript. No bloat, just speed.</p>
                            </div>
                        </div>
                    </div>
                `;
            }
        };

        // Boot the app
        document.addEventListener('DOMContentLoaded', () => {
            App.init();
        });

    </script>
</body>
</html>